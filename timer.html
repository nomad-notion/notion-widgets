<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dual Timer Final</title>
  <style>
    /* 1. ë ˆì´ì•„ì›ƒ ê°•ì œ ì„¤ì • */
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      background-color: transparent;
      font-family: ui-sans-serif, -apple-system, sans-serif;
      display: flex; justify-content: center; align-items: center;
      overflow: hidden;
    }

    /* 2. ì»¨í…Œì´ë„ˆ ë””ìì¸ */
    .container {
      width: 90%; max-width: 320px;
      background-color: #F7F6F3;
      border: 1px solid rgba(55, 53, 47, 0.09);
      border-radius: 12px;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center;
      padding: 24px; box-sizing: border-box;
      box-shadow: 0 2px 8px rgba(0,0,0,0.02);
      
      /* â˜… í•µì‹¬: ë¬´ì¡°ê±´ ë³´ì´ê²Œ ì„¤ì • â˜… */
      visibility: visible; opacity: 1; display: flex;
    }

    /* 3. í™”ë©´ 1: ëª¨ë“œ ì„ íƒ (ê¸°ë³¸ê°’: ë³´ì„) */
    #selection-screen {
      display: flex; /* ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—†ì´ë„ ë³´ì„ */
      flex-direction: column; width: 100%; gap: 12px;
    }

    .menu-title {
      font-size: 1.1rem; font-weight: 600;
      margin-bottom: 8px; color: #37352F;
    }

    .select-btn {
      padding: 14px; border-radius: 8px;
      border: 1px solid rgba(55, 53, 47, 0.16);
      background-color: white; color: #37352F;
      font-size: 1rem; font-weight: 500; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 8px;
      transition: background 0.2s;
    }
    .select-btn:hover { background-color: rgba(55, 53, 47, 0.04); }

    /* 4. í™”ë©´ 2: íƒ€ì´ë¨¸ (ê¸°ë³¸ê°’: ìˆ¨ê¹€) */
    #timer-screen {
      display: none; /* JSê°€ ë¡œë“œë˜ë©´ ì´ê±¸ flexë¡œ ë°”ê¿ˆ */
      flex-direction: column; align-items: center; width: 100%;
    }

    .timer-header {
      width: 100%; display: flex; justify-content: space-between;
      margin-bottom: 20px;
    }
    .back-btn {
      background: none; border: none; cursor: pointer;
      font-size: 0.85rem; color: rgba(55, 53, 47, 0.4); padding: 0;
    }
    .mode-badge {
      font-size: 0.75rem; font-weight: 700;
      padding: 4px 8px; border-radius: 4px;
      background: rgba(55, 53, 47, 0.1); color: #37352F;
    }

    .timer-display {
      font-size: 3.5rem; font-weight: 700; color: #37352F;
      font-variant-numeric: tabular-nums; line-height: 1;
      margin-bottom: 20px;
    }

    /* ê²Œì´ì§€ (SVG) */
    .gauge-box {
      position: relative; width: 40px; height: 40px;
      margin-bottom: 20px; display: flex; justify-content: center;
    }
    .progress-ring { transform: rotate(-90deg); width: 100%; height: 100%; }
    .bg-ring { stroke: rgba(55, 53, 47, 0.1); fill: none; stroke-width: 6; }
    .fill-ring {
      fill: none; stroke-width: 6; stroke-linecap: round;
      stroke-dasharray: 100 100; stroke-dashoffset: 0;
      transition: stroke-dashoffset 0.3s;
    }

    /* ë²„íŠ¼ ê·¸ë£¹ */
    .btn-group { display: flex; gap: 10px; width: 100%; }
    .btn {
      flex: 1; padding: 10px; border-radius: 6px; border: none;
      font-size: 0.9rem; font-weight: 600; cursor: pointer;
    }
    .btn-main { background-color: #37352F; color: white; }
    .btn-reset { background-color: white; border: 1px solid rgba(55, 53, 47, 0.15); color: #37352F; }

  </style>
</head>
<body>

  <div class="container">
    
    <div id="selection-screen">
      <div class="menu-title">Select Mode</div>
      <button class="select-btn" onclick="startMode('pomodoro')">
        <span>ğŸ…</span> Pomodoro
      </button>
      <button class="select-btn" onclick="startMode('stopwatch')">
        <span>â±ï¸</span> Stopwatch
      </button>
    </div>

    <div id="timer-screen">
      <div class="timer-header">
        <button class="back-btn" onclick="goBack()">â† Back</button>
        <span class="mode-badge" id="badge">FOCUS</span>
      </div>

      <div class="timer-display" id="display">00:00</div>

      <div class="gauge-box">
        <svg class="progress-ring" viewBox="0 0 40 40">
          <circle class="bg-ring" r="16" cx="20" cy="20"></circle>
          <circle id="ring-fill" class="fill-ring" r="16" cx="20" cy="20"></circle>
        </svg>
      </div>

      <div class="btn-group">
        <button class="btn btn-main" id="btn-toggle" onclick="toggleTimer()">Start</button>
        <button class="btn btn-reset" onclick="resetTimer()">Reset</button>
      </div>
    </div>

  </div>

  <script>
    // === ì•ˆì „í•œ ìŠ¤í¬ë¦½íŠ¸ (ì—ëŸ¬ê°€ ë‚˜ë„ í™”ë©´ì€ ëœ¸) ===
    
    // ë³€ìˆ˜ ì„ ì–¸
    var mode = 'pomodoro'; // 'pomodoro' | 'stopwatch'
    var time = 25 * 60;
    var active = false;
    var timer = null;
    var isFocus = true;
    
    // ìƒìˆ˜
    var POMO_MIN = 25;
    var BREAK_MIN = 5;
    var RING_LEN = 100; // ì›ì˜ ë‘˜ë ˆ (ê·¼ì‚¬ê°’)
    
    var COLOR_POMO = '#4A7C59'; // ë…¹ìƒ‰
    var COLOR_BREAK = '#F28C28'; // ì£¼í™©
    var COLOR_STOP = '#227C9D'; // íŒŒë‘

    // 1. ëª¨ë“œ ì‹œì‘
    function startMode(selectedMode) {
      mode = selectedMode;
      document.getElementById('selection-screen').style.display = 'none';
      document.getElementById('timer-screen').style.display = 'flex';
      
      resetTimer(); // ì´ˆê¸°í™” í›„ ì‹œì‘
    }

    // 2. ë’¤ë¡œ ê°€ê¸°
    function goBack() {
      clearInterval(timer);
      active = false;
      document.getElementById('timer-screen').style.display = 'none';
      document.getElementById('selection-screen').style.display = 'flex';
    }

    // 3. íƒ€ì´ë¨¸ í† ê¸€ (Start/Pause)
    function toggleTimer() {
      if (active) {
        clearInterval(timer);
        active = false;
      } else {
        timer = setInterval(tick, 1000);
        active = true;
      }
      updateView();
    }

    // 4. íƒ€ì´ë¨¸ í‹±
    function tick() {
      if (mode === 'pomodoro') {
        if (time > 0) {
          time--;
        } else {
          // ë½€ëª¨ë„ë¡œ ì¢…ë£Œ -> ì „í™˜
          clearInterval(timer);
          active = false;
          isFocus = !isFocus;
          time = (isFocus ? POMO_MIN : BREAK_MIN) * 60;
        }
      } else {
        // ìŠ¤í†±ì›Œì¹˜
        time++;
      }
      updateView();
    }

    // 5. ë¦¬ì…‹
    function resetTimer() {
      clearInterval(timer);
      active = false;
      isFocus = true;

      if (mode === 'pomodoro') {
        time = POMO_MIN * 60;
      } else {
        time = 0;
      }
      updateView();
    }

    // 6. í™”ë©´ ì—…ë°ì´íŠ¸ (DOM ì¡°ì‘)
    function updateView() {
      // ì‹œê°„ í…ìŠ¤íŠ¸
      var m = Math.floor(time / 60);
      var s = time % 60;
      var txt = (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);
      document.getElementById('display').innerText = txt;

      // ë²„íŠ¼ í…ìŠ¤íŠ¸
      document.getElementById('btn-toggle').innerText = active ? "Pause" : "Start";

      // ë””ìì¸ í…Œë§ˆ ì ìš©
      var badge = document.getElementById('badge');
      var ring = document.getElementById('ring-fill');
      var btn = document.getElementById('btn-toggle');
      var color = COLOR_POMO;

      if (mode === 'pomodoro') {
        // ê²Œì´ì§€ ì¤„ì–´ë“¦
        var total = (isFocus ? POMO_MIN : BREAK_MIN) * 60;
        var offset = RING_LEN - (time / total) * RING_LEN;
        ring.style.strokeDashoffset = offset;

        if (isFocus) {
          badge.innerText = "FOCUS";
          color = COLOR_POMO;
        } else {
          badge.innerText = "BREAK";
          color = COLOR_BREAK;
        }
      } else {
        // ìŠ¤í†±ì›Œì¹˜ (ê²Œì´ì§€ ë±…ê¸€ë±…ê¸€ - 60ì´ˆ ê¸°ì¤€)
        badge.innerText = "STOPWATCH";
        color = COLOR_STOP;
        var sec = time % 60;
        var offset = RING_LEN - (sec / 60) * RING_LEN;
        ring.style.strokeDashoffset = -offset; // ë°˜ëŒ€ë¡œ ì°¨ì˜¤ë¦„
      }

      // ìƒ‰ìƒ ì ìš©
      ring.style.stroke = color;
      badge.style.color = color;
      badge.style.backgroundColor = color + "20"; // íˆ¬ëª…ë„ 20%
      if (active) {
        btn.style.backgroundColor = "#E0E0E0"; // íšŒìƒ‰ (ë©ˆì¶¤ ìƒíƒœì¼ ë•Œ)
        btn.style.color = "#333";
      } else {
        btn.style.backgroundColor = color;
        btn.style.color = "white";
      }
    }

  </script>
</body>
</html>
