<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timer Circle Final</title>
  <style>
    /* 1. ë ˆì´ì•„ì›ƒ (ë¬´ì¡°ê±´ í™”ë©´ ì¤‘ì•™ ì •ë ¬) */
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100vh;
      background-color: transparent;
      font-family: ui-sans-serif, -apple-system, sans-serif;
      display: flex; justify-content: center; align-items: center;
      overflow: hidden;
      color: #37352F;
    }

    /* 2. ì»¨í…Œì´ë„ˆ (ë¬´ì¡°ê±´ ë³´ì„ ì„¤ì •) */
    .container {
      width: 90%; max-width: 320px;
      background-color: #F7F6F3;
      border: 1px solid rgba(55, 53, 47, 0.09);
      border-radius: 16px;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center;
      padding: 24px; box-sizing: border-box;
      box-shadow: 0 2px 10px rgba(0,0,0,0.03);
      position: relative;
      
      /* â˜… CSS ì•ˆì „ì¥ì¹˜ â˜… */
      visibility: visible !important; opacity: 1 !important; 
      min-height: 300px;
    }

    /* === ì„ íƒ í™”ë©´ === */
    #selection-screen {
      display: flex; flex-direction: column; width: 100%; gap: 12px;
    }
    .menu-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; }
    .select-btn {
      padding: 14px; border-radius: 10px;
      border: 1px solid rgba(55, 53, 47, 0.1);
      background-color: white; color: #37352F;
      font-size: 1rem; font-weight: 600; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 8px;
      transition: 0.2s;
    }
    .select-btn:hover { background-color: rgba(55, 53, 47, 0.04); transform: scale(1.02); }

    /* === íƒ€ì´ë¨¸ í™”ë©´ === */
    #timer-screen {
      display: none; flex-direction: column; align-items: center; width: 100%;
    }
    .timer-header {
      width: 100%; display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 20px;
    }
    .back-btn {
      background: none; border: none; cursor: pointer;
      font-size: 0.85rem; color: rgba(55, 53, 47, 0.4); padding: 0;
    }
    .back-btn:hover { color: #37352F; }
    .mode-badge {
      font-size: 0.7rem; font-weight: 800;
      padding: 4px 8px; border-radius: 6px;
      text-transform: uppercase; letter-spacing: 0.05em;
    }
    .timer-display {
      font-size: 3.5rem; font-weight: 800;
      font-variant-numeric: tabular-nums; line-height: 1;
      margin-bottom: 20px;
    }

    /* â˜…â˜…â˜… ìˆ˜ì •ëœ ì›í˜• íŒŒì´ ê²Œì´ì§€ SVG â˜…â˜…â˜… */
    .gauge-wrapper {
      position: relative;
      width: 80px; height: 80px; /* í¬ê¸° ì¡°ì ˆ */
      margin-bottom: 25px;
      display: flex; justify-content: center; align-items: center;
    }
    
    .gauge-svg {
      width: 100%; height: 100%;
      transform: rotate(-90deg); /* 12ì‹œ ë°©í–¥ ì‹œì‘ */
      border-radius: 50%; /* í˜¹ì‹œ ëª¨ë¥¼ ì‚¬ê°í˜• ë°©ì§€ */
    }

    /* ê³µí†µ ì› ìŠ¤íƒ€ì¼ */
    .gauge-circle {
      fill: none;
      /* stroke-widthë¥¼ ë°˜ì§€ë¦„(25)ì˜ 2ë°°ì¸ 50ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë‚´ë¶€ë¥¼ ê½‰ ì±„ì›€ */
      stroke-width: 50; 
      cx: 50; cy: 50; r: 25; /* ì¤‘ì‹¬ì ê³¼ ë°˜ì§€ë¦„ ëª…ì‹œ */
    }

    /* ë°°ê²½ ì› (ì—°í•œ íšŒìƒ‰) */
    .gauge-bg { stroke: rgba(55, 53, 47, 0.08); }

    /* ì±„ì›Œì§€ëŠ” ì› (ìƒ‰ìƒ ë° ì• ë‹ˆë©”ì´ì…˜) */
    .gauge-fill {
      /* ë‘˜ë ˆ(2 * pi * 25) â‰ˆ 157 */
      stroke-dasharray: 157 157;
      stroke-dashoffset: 0; /* ì´ˆê¸°ê°’: ê½‰ ì°¸ */
      stroke-linecap: butt; /* íŒŒì´ ëª¨ì–‘ì„ ìœ„í•´ ëì„ ì§ê°ìœ¼ë¡œ */
      transition: stroke-dashoffset 0.3s linear, stroke 0.3s ease;
    }

    /* ë²„íŠ¼ ê·¸ë£¹ */
    .btn-group { display: flex; gap: 8px; width: 100%; margin-bottom: 20px; }
    .btn {
      flex: 1; padding: 12px; border-radius: 8px; border: none;
      font-size: 1rem; font-weight: 600; cursor: pointer;
    }
    .btn-main { color: white; }
    .btn-reset { background-color: white; border: 1px solid rgba(55, 53, 47, 0.15); color: #37352F; }

    /* ì„œëª… */
    .signature {
      font-size: 0.7rem; color: rgba(55, 53, 47, 0.3); font-family: sans-serif;
      margin-top: auto;
    }
  </style>
</head>
<body>

  <div class="container">
    
    <div id="selection-screen">
      <div class="menu-title">Select Mode</div>
      <button class="select-btn" onclick="app.start('pomodoro')">
        <span>ğŸ…</span> Pomodoro
      </button>
      <button class="select-btn" onclick="app.start('stopwatch')">
        <span>â±ï¸</span> Stopwatch
      </button>
      <div class="signature" style="margin-top: 25px;">nomadplanner</div>
    </div>

    <div id="timer-screen">
      <div class="timer-header">
        <button class="back-btn" onclick="app.back()">â† Back</button>
        <span class="mode-badge" id="badge">FOCUS</span>
      </div>

      <div class="timer-display" id="display">25:00</div>

      <div class="gauge-wrapper">
        <svg class="gauge-svg" viewBox="0 0 100 100">
          <circle class="gauge-circle gauge-bg"></circle>
          <circle id="gauge-fill" class="gauge-circle gauge-fill"></circle>
        </svg>
      </div>

      <div class="btn-group">
        <button class="btn btn-main" id="btn-toggle" onclick="app.toggle()">Start</button>
        <button class="btn btn-reset" onclick="app.reset()">Reset</button>
      </div>

      <div class="signature">nomadplanner</div>
    </div>

  </div>

  <script>
    // === ì•± ë¡œì§ ===
    var app = {
      mode: 'pomodoro',
      time: 1500, 
      active: false,
      timerId: null,
      isFocus: true,
      
      // ìƒìˆ˜ ì„¤ì •
      POMO_SEC: 1500, // 25ë¶„
      BREAK_SEC: 300, // 5ë¶„
      FULL_DASH: 157, // ì›ì˜ ë‘˜ë ˆ (2 * pi * 25)
      
      COLORS: {
        POMO: '#4A7C59', // ë…¹ìƒ‰
        BREAK: '#F28C28', // ì£¼í™©
        STOP: '#227C9D'  // íŒŒë‘
      },

      // 1. ëª¨ë“œ ì‹œì‘
      start: function(mode) {
        this.mode = mode;
        document.getElementById('selection-screen').style.display = 'none';
        document.getElementById('timer-screen').style.display = 'flex';
        this.reset();
      },

      // 2. ë’¤ë¡œ ê°€ê¸°
      back: function() {
        clearInterval(this.timerId);
        this.active = false;
        document.getElementById('timer-screen').style.display = 'none';
        document.getElementById('selection-screen').style.display = 'flex';
      },

      // 3. í† ê¸€
      toggle: function() {
        if (this.active) {
          clearInterval(this.timerId);
          this.active = false;
        } else {
          this.timerId = setInterval(this.tick.bind(this), 1000);
          this.active = true;
        }
        this.update();
      },

      // 4. í‹± (1ì´ˆë§ˆë‹¤ ì‹¤í–‰)
      tick: function() {
        if (this.mode === 'pomodoro') {
          if (this.time > 0) {
            this.time--;
          } else {
            clearInterval(this.timerId);
            this.active = false;
            this.isFocus = !this.isFocus;
            this.time = this.isFocus ? this.POMO_SEC : this.BREAK_SEC;
          }
        } else {
          this.time++;
        }
        this.update();
      },

      // 5. ë¦¬ì…‹
      reset: function() {
        clearInterval(this.timerId);
        this.active = false;
        this.isFocus = true;
        this.time = this.mode === 'pomodoro' ? this.POMO_SEC : 0;
        this.update();
      },

      // 6. í™”ë©´ ì—…ë°ì´íŠ¸
      update: function() {
        // ì‹œê°„ í…ìŠ¤íŠ¸
        var m = Math.floor(this.time / 60);
        var s = this.time % 60;
        document.getElementById('display').innerText = 
          (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);

        // ë²„íŠ¼ í…ìŠ¤íŠ¸
        var btn = document.getElementById('btn-toggle');
        btn.innerText = this.active ? "Pause" : "Start";

        // ê²Œì´ì§€ ë° ìƒ‰ìƒ
        var fill = document.getElementById('gauge-fill');
        var badge = document.getElementById('badge');
        var color = this.COLORS.POMO;

        if (this.mode === 'pomodoro') {
          var total = this.isFocus ? this.POMO_SEC : this.BREAK_SEC;
          // ë‚¨ì€ ì‹œê°„ë§Œí¼ ì˜¤í”„ì…‹ ì ìš© (ì¤„ì–´ë“¦)
          var offset = this.FULL_DASH - (this.time / total) * this.FULL_DASH;
          fill.style.strokeDashoffset = offset;

          if (this.isFocus) {
            badge.innerText = "FOCUS"; color = this.COLORS.POMO;
          } else {
            badge.innerText = "BREAK"; color = this.COLORS.BREAK;
          }
        } else {
          // ìŠ¤í†±ì›Œì¹˜ (60ì´ˆ ê¸°ì¤€ ë±…ê¸€ë±…ê¸€)
          badge.innerText = "STOPWATCH"; color = this.COLORS.STOP;
          var sec = this.time % 60;
          // ì°¨ì˜¤ë¦„ (ìŒìˆ˜ ì˜¤í”„ì…‹)
          var offset = this.FULL_DASH - (sec / 60) * this.FULL_DASH;
          fill.style.strokeDashoffset = -offset; 
        }

        // ìƒ‰ìƒ ì ìš©
        fill.style.stroke = color;
        badge.style.color = color;
        badge.style.backgroundColor = color + "20";
        
        if (this.active) {
          btn.style.backgroundColor = "#E0E0E0"; btn.style.color = "#888";
        } else {
          btn.style.backgroundColor = color; btn.style.color = "white";
        }
      }
    };

    // ì´ˆê¸°í™”
    window.onload = function() { app.update(); };
  </script>
</body>
</html>
