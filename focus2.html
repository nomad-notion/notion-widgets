<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Work Progress</title>
  <style>
    /* 1. ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì • */
    body {
      margin: 0; padding: 0;
      background-color: transparent;
      /* ë…¸ì…˜ ê¸°ë³¸ í°íŠ¸ ì ìš© */
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    /* 2. ë©”ì¸ ë°•ìŠ¤ ë””ìì¸ */
    .main-box {
      /* ë°°ê²½ìƒ‰ ìˆ˜ì • ê°€ëŠ¥: #F7F6F3(ë…¸ì…˜ íšŒìƒ‰) */
      background-color: #F7F6F3;
      border-radius: 10px;
      width: 95%;
      height: 90%; /* ë†’ì´ ì¡°ì • */
      box-sizing: border-box;
      padding: 20px 30px; /* ë‚´ë¶€ ì—¬ë°± */
      color: #37352F;
      position: relative; /* ì´ë¯¸ì§€ë¥¼ ë°°ì¹˜í•˜ê¸° ìœ„í•œ ê¸°ì¤€ */
      display: flex;
      flex-direction: column;
      justify-content: center;
      border: 1px solid rgba(55, 53, 47, 0.09); /* ì–‡ì€ í…Œë‘ë¦¬ */
    }

    h2 {
      margin: 0;
      font-size: 1.5rem;
      margin-bottom: 5px;
    }

    h3 {
      margin: 0;
      font-size: 1rem;
      font-weight: normal;
      color: rgba(55, 53, 47, 0.65);
      margin-bottom: 20px;
    }

    /* 3. ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ (ì˜¤ë¥¸ìª½ ì•„ë˜ ë°°ì¹˜) */
    .char-img {
      position: absolute;
      width: 120px; /* ì´ë¯¸ì§€ í¬ê¸° ì¡°ì ˆ (í•„ìš”í•˜ë©´ ìˆ«ì ë³€ê²½) */
      bottom: 10px;   /* ë°”ë‹¥ì—ì„œ ì–¼ë§ˆë‚˜ ë„ìš¸ì§€ */
      right: 20px;    /* ì˜¤ë¥¸ìª½ì—ì„œ ì–¼ë§ˆë‚˜ ë„ìš¸ì§€ */
      z-index: 10;
    }

    /* 4. ê²Œì´ì§€ ë°” ë””ìì¸ */
    .p-box {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      z-index: 20; /* ì´ë¯¸ì§€ë³´ë‹¤ ìœ„ì— ê¸€ì”¨ê°€ ì˜¤ë„ë¡ */
    }

    .progress-container {
      width: 70%; /* ë°” ì „ì²´ ê¸¸ì´ */
      height: 12px;
      background-color: rgba(55, 53, 47, 0.09);
      border-radius: 6px;
      overflow: hidden;
      margin-bottom: 8px;
    }

    .progress-bar {
      height: 100%;
      /* ê²Œì´ì§€ ìƒ‰ìƒ: ê²€ì • ê·¸ë¼ë°ì´ì…˜ */
      background: linear-gradient(to right, #37352F, #999);
      width: 0%;
      border-radius: 6px;
      transition: width 1s linear;
    }

    .time-info {
      font-size: 0.9rem;
      color: #37352F;
      font-weight: 500;
    }

    /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 600px) {
      .char-img { width: 80px; bottom: 10px; right: 10px; }
      .progress-container { width: 100%; }
    }
  </style>
</head>

<body>
  <div class="main-box" id="box">
    
    <div>
      <h2 id="welcome">Welcome back!</h2>
      <h3><span id="now_time"></span></h3>
      
      <div class="p-box">
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="time-info">
          <span id="progress-percent">0%</span>
          <span id="time-left"></span>
        </div>
      </div>
    </div>

    <img src="./stamp.png" class="char-img" alt="character" />
    </div>

  <script>
    /* ì„¤ì • ì˜ì—­ */
    const WORK_START_HOUR = 9;  // ì¶œê·¼ ì‹œê°„ (9ì‹œ)
    const WORK_END_HOUR = 18;   // í‡´ê·¼ ì‹œê°„ (18ì‹œ = ì˜¤í›„ 6ì‹œ)
    
    function updateWidget() {
      const now = new Date();
      
      // 1. í˜„ì¬ ì‹œê°„ í‘œì‹œ (ì˜ë¬¸ ìŠ¤íƒ€ì¼)
      const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      document.getElementById('now_time').innerText = `It's ${timeString}.`;

      // 2. í‡´ê·¼ ê²Œì´ì§€ ê³„ì‚°
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();
      const currentSecond = now.getSeconds();

      const totalWorkSeconds = (WORK_END_HOUR - WORK_START_HOUR) * 3600;
      let secondsPassed = 0;

      if (currentHour >= WORK_START_HOUR && currentHour < WORK_END_HOUR) {
        // ê·¼ë¬´ ì¤‘
        secondsPassed = (currentHour - WORK_START_HOUR) * 3600 + (currentMinute * 60) + currentSecond;
      } else if (currentHour >= WORK_END_HOUR) {
        // í‡´ê·¼ í›„
        secondsPassed = totalWorkSeconds;
      }
      // ì¶œê·¼ ì „ì´ë©´ 0

      const progress = (secondsPassed / totalWorkSeconds) * 100;
      
      // ë‚¨ì€ ì‹œê°„ ê³„ì‚°
      let timeLeft = totalWorkSeconds - secondsPassed;
      if (timeLeft < 0) timeLeft = 0;

      const hoursLeft = Math.floor(timeLeft / 3600);
      const minutesLeft = Math.floor((timeLeft % 3600) / 60);

      // 3. í™”ë©´ ì—…ë°ì´íŠ¸
      document.getElementById("progress-bar").style.width = `${progress}%`;
      
      let message = "";
      if (currentHour < WORK_START_HOUR) {
        message = " Not work time yet â˜•";
      } else if (progress >= 100) {
        message = " Time to go home! ğŸ‰";
      } else {
        message = ` âœ ${hoursLeft}h ${minutesLeft}m to freedom!`;
      }

      document.getElementById("progress-percent").innerText = `${Math.floor(progress)}%`;
      document.getElementById("time-left").innerText = message;
    }

    // ì‹¤í–‰
    updateWidget();
    setInterval(updateWidget, 1000);
  </script>
</body>
</html>
