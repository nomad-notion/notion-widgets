<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Style Countdown</title>
    <style>
        /* 1. ë…¸ì…˜ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ ì •ì˜ */
        :root {
            --fg: #37352f;          /* ë…¸ì…˜ ê¸°ë³¸ í…ìŠ¤íŠ¸ */
            --muted: #787774;       /* ë…¸ì…˜ íšŒìƒ‰ í…ìŠ¤íŠ¸ */
            --accent: #37352f;      /* ê°•ì¡°ìƒ‰ (ê²€ì •) */
            --bar-bg: rgba(55, 53, 47, 0.08); /* í”„ë¡œê·¸ë ˆìŠ¤ë°” ë°°ê²½ */
        }

        /* ë‹¤í¬ëª¨ë“œ ëŒ€ì‘ */
        @media (prefers-color-scheme: dark) {
            :root {
                --fg: #d4d4d4;
                --muted: #9b9a97;
                --accent: #ffffff;
                --bar-bg: rgba(255, 255, 255, 0.1);
            }
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple SD Gothic Neo", sans-serif;
            background-color: transparent; /* ë°°ê²½ íˆ¬ëª… */
            color: var(--fg);
            display: flex;
            flex-direction: column;
            justify-content: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            height: 100vh;
            overflow: hidden;
        }

        .container {
            width: 100%;
            padding: 0 20px; /* ì¢Œìš° ì—¬ë°± */
            max-width: 600px;
            margin: 0 auto;
        }

        /* íƒ€ì´í‹€ ì˜ì—­ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 12px;
        }

        .title {
            font-size: 1.2rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .d-day-badge {
            font-size: 0.9rem;
            color: var(--muted);
            font-weight: 500;
            background: var(--bar-bg);
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* ìˆ«ì ê·¸ë¦¬ë“œ (ë°•ìŠ¤ ì œê±°, ìˆ«ì ê°•ì¡°) */
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            text-align: left; /* ë…¸ì…˜ì€ ì£¼ë¡œ ì™¼ìª½ ì •ë ¬ */
            margin-bottom: 16px;
        }

        .num {
            font-size: 2.2rem;
            font-weight: 700;
            line-height: 1.1;
            letter-spacing: -0.03em;
        }

        .label {
            font-size: 0.75rem;
            color: var(--muted);
            font-weight: 500;
            margin-top: 4px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” (ë…¸ì…˜ ìŠ¤íƒ€ì¼ë¡œ ì–‡ê²Œ) */
        .progress-container {
            width: 100%;
            height: 6px;
            background: var(--bar-bg);
            border-radius: 99px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            border-radius: 99px;
            transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .footer {
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--muted);
        }

        /* ì™„ë£Œ ìƒíƒœ */
        .done-message {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            animation: popUp 0.5s ease;
        }

        @keyframes popUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

    </style>
</head>
<body>

    <div class="container" id="app">
        <div class="header">
            <div class="title" id="title">Countdown</div>
            <div class="d-day-badge" id="d-badge">D-Day</div>
        </div>

        <div class="grid" id="grid">
            <div><div class="num" id="d">0</div><div class="label">Days</div></div>
            <div><div class="num" id="h">0</div><div class="label">Hours</div></div>
            <div><div class="num" id="m">0</div><div class="label">Mins</div></div>
            <div><div class="num" id="s">0</div><div class="label">Secs</div></div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progress"></div>
        </div>

        <div class="footer">
            <span id="targetText">Target Date</span>
            <span id="percentText">0%</span>
        </div>

        <div class="done-message" id="done">
            ğŸ‰ ëª©í‘œ ë‹¬ì„±!
        </div>
    </div>

    <script>
        // ğŸ› ï¸ ì—¬ê¸°ì— ëª©í‘œ ë‚ ì§œë¥¼ ì§ì ‘ ìˆ˜ì •í•´ë„ ë©ë‹ˆë‹¤! (YYYY-MM-DD í˜•ì‹)
        // URL íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ì´ ë‚ ì§œê°€ ê¸°ë³¸ê°’ì´ ë©ë‹ˆë‹¤.
        const DEFAULT_TARGET = "2026-01-01"; 
        const DEFAULT_TITLE = "ì˜¬í•´ ë‚¨ì€ ì‹œê°„";

        // --- ê¸°ëŠ¥ ë¡œì§ ---
        const $ = (id) => document.getElementById(id);
        const getParam = (name) => new URL(location.href).searchParams.get(name);

        // 1. ì„¤ì •ê°’ íŒŒì‹±
        const titleParam = getParam('title') || DEFAULT_TITLE;
        const targetParam = getParam('target') || DEFAULT_TARGET;
        
        // ë‚ ì§œ íŒŒì‹± (ë‹¨ìˆœ ë‚ ì§œë§Œ ìˆìœ¼ë©´ ìì • ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •)
        let targetDate = new Date(targetParam);
        if (targetParam.length === 10) { 
            targetDate = new Date(targetParam + "T00:00:00");
        }

        // í™”ë©´ ì´ˆê¸° ì„¸íŒ…
        $('title').innerText = titleParam;
        $('targetText').innerText = targetDate.toLocaleDateString();

        // ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œì¼ ê²½ìš°
        if (isNaN(targetDate.getTime())) {
            $('title').innerText = "ë‚ ì§œ ì„¤ì • ì˜¤ë¥˜";
            $('targetText').innerText = "YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”";
        }

        // 2. ì¹´ìš´íŠ¸ë‹¤ìš´ í•¨ìˆ˜
        function tick() {
            const now = new Date();
            const diff = targetDate - now;

            // ì™„ë£Œ ì‹œ
            if (diff <= 0) {
                $('grid').style.display = 'none';
                $('done').style.display = 'block';
                $('progress').style.width = '100%';
                $('percentText').innerText = "100%";
                $('d-badge').innerText = "Done";
                return;
            }

            // ì‹œê°„ ê³„ì‚°
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const mins = Math.floor((diff / (1000 * 60)) % 60);
            const secs = Math.floor((diff / 1000) % 60);

            // í™”ë©´ í‘œì‹œ
            $('d').innerText = days;
            $('h').innerText = hours;
            $('m').innerText = mins;
            $('s').innerText = secs;
            $('d-badge').innerText = `D-${days}`;

            // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ê³„ì‚° (ì˜¤ëŠ˜ ê¸°ì¤€ìœ¼ë¡œ 30ì¼ ì „ë¶€í„° ì‹œì‘í•œë‹¤ê³  ê°€ì •í•˜ì—¬ ì‹œê°í™”)
            // *ì‹œì‘ ë‚ ì§œ(?start=)ê°€ ì—†ìœ¼ë©´, ë§ˆê° 30ì¼ ì „ì„ 0%ë¡œ ì¡ìŠµë‹ˆë‹¤.
            const startParam = getParam('start');
            let startDate = startParam ? new Date(startParam) : new Date(targetDate.getTime() - (30 * 24 * 60 * 60 * 1000));
            
            let totalDuration = targetDate - startDate;
            let passed = now - startDate;
            let percent = (passed / totalDuration) * 100;

            if (percent < 0) percent = 0;
            if (percent > 100) percent = 100;

            $('progress').style.width = `${percent}%`;
            $('percentText').innerText = `${Math.round(percent)}%`;

            requestAnimationFrame(tick);
        }

        tick();
    </script>
</body>
</html>
